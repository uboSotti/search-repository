이제 새로운 프로젝트를 시작 할꺼야. Android 앱 기본 골격을 만들어 보자.
아키텍처는 구글의 권장 아키텍쳐를 따라 multi module 로 구성을 할꺼고.
Hilt 를 사용해 모듈들을 연결 시켜 줄꺼야.
우선 기본 안드로이드 앱 의 기본 프로젝트 구조를 추가하는 걸로 작업을 시작해 보자.
기본 빌드가 되는 것까지 해야할 일들을 목표를 우선 새우고. 절차대로 진행할꺼야.

앱 이름은 KurlyExam.
application id 는 com.kurly.exam.jnsk

로 생성 해줘

----

 @libs.versions.toml  파일을 보고 최적화 시켜줘
그리고, 각  build.gradle.kts 파일들에 의존성을 업데이트 시켜주고. 라이브러리들 버전 또한 최신화 시켜줘

----

Unable to load class 'com.google.devtools.ksp.gradle.KspTaskJvm'
com.google.devtools.ksp.gradle.KspTaskJvm

이런 오류를 내면서 빌드가 안되고 있는데 이유를 찾아줘
----

지금 생성된 featrue:search 모듈의 이름을 main 으로 변경해줘

----

이제 feature:main 에 우리 앱의 기본 화면을 만들꺼야.
Compose 를 활용해서 개발할꺼고 최신 안드로이드 16 개발 기준에 맞춰 테마를 재구성 해야해.
가령 edge to edge 같은 가이드를 준수 해줘야.

그리고, 아래 가이드에 맞도록 기본 화면을 생성해줘

1. 앱이 켜질때 main 모듈에 있는 화면에 노출되도록 수정을 하고.
2. 첨부한 이미지를 참고하여, 기본 화면 및 컴포넌트들을 제작해줘. #제공받은 이미지 첨부
3. 각 종 색상이나 사이즈들은 공통 컴포넌트를 최대한 활용하며, 없는 경우 기본 골격에 맞춰 추가해줘

----

니가 추가한 coil3 이 새로 나왔다고 확인 했는데 그 기준에 맞춰 새롭게 추가 해줘

----

현 상태에서 두가지 문제를 해결 해야해 Hilt 의 navigation-compose 디펜던시가 누락된 걸로 확인 되고, Icons 라이브러리 사용법이 변경된 걸로 확인 되었어. 두가지 문제를 확인하고 빌드가 되어 앱이 실행 가능한 상태까지 진행해줘

----

우선 잘못 수정된 부분을 정정할게,

The hiltViewModel() APIs for Compose have been moved to a new artifact (androidx.hilt:hilt-lifecycle-viewmodel-compose) and package (androidx.hilt.lifecycle.viewmodel.compose) such that they can be used without transitively depending on androidx.navigation.

참고해서 다시 반영해줘

----

그리고 Icons 는 androidx.compose.material:material-icons-core 라는 의존성을 가져야 하는 걸로 보이는데, 관련해서 내용 검색해 보고 의존성을 해결해줘

----

첨부한 이미지를 보면 상품 아이템에는 찜하기 여부가 존재 하는데, 너의 구현에서는 누락된걸로 확인된다. ( # 가이드 문서 다시 추가 )

ic_btn_heart_on.xml
ic_btn_heart_off.xml

두 이미지를 활용해, 상태에 따라 해당 값을 노출하도록 추가 해줘.

----

이제 네트워크 연결을 시작해 보자.

우선 우리가 사용할 라이브러리는 OkHttp 와 Retrofit 을 사용할 거야.
Hilt 를 활용해 Okhttp client 와 retrofit 의 interface 는 Hilt 의 모듈로 별도 network 모듈에 추가 해줘

그리고 추가해둔 :core:mockserver 를 활용해 api 를 테스트 할꺼야.

첫번째로.
- OkHttp 에 MockInterceptor 를 추가 해둬야하해
- Api 는 아래 내용을 참고해서 SectionApi 인터페이스에 retrofit service 로 만들어줘.
- 각 api 응답값에 맞는 데이터 모델을 생성해줘

BaseUrl : https://kurly.com/

1. sections api
섹션 목록 불러오기 ( “sections")
- query - page: Int
* type 에 따라 뷰타입을 나누고, id 에 따라서 각각의 섹션의 상품목록을 보여주도록 하자.
데이터 모델 참고 파일 (sections_1.json)

2. section products api
섹션 별 상품 목록상품 데이터 (“section/products")
- query - sectionId : Int
데이터 모델 참고 파일 (section_products_7.json)

둘째로.
- SectionRepository 를 생성해 해당 SectionApi 를 hilt 모듈로 주입 받아 데이터를 전달 받을 수 있어야해
- 각 Api 별로 UseCase 를 도메인 레이어에 추가 해줘.
- MainViewModel 에서 생성된 UseCase 를 참조해 데이터 흐름을 만들어줘

여기 까지 작업을 진행할껀데 어떤 순서로 진행할건지 절차를 우선 나에게 보여주고 우선순위에 맞춰 하나씩 전행 해보자.

* 파일 추가 규칙
- 현재 생성된 프로젝트 아키텍처 MVVM 에 맞게 옳바른곳에 생성해줘야해.

----

좋아. 지난 과정에서 우리가 놓친 것들을 확인 해볼꺼야.

1. data 모듈에 의존성이 누락된 부분들이 있어.
2. mockserver 모듈의 의존성이 누락된 부분 들이 있어.
3.  @libs.versions.toml  파일을 다시 한번 최적화 해서 각 모듈들의 디펜던시를 정리 해보자

----

e: file:///C:/Users/jnsk8/AndroidStudioProjects/search-repository/feature/main/src/main/java/com/kurly/exam/feature/main/MainScreen.kt:8:35 Unresolved reference 'Icons'.

이번에 니가 수정한 내용에 오류가 있어.

import androidx.compose.material3.Icons

를 활용하면서 생기는 이슈 인데, 이부분은 라이브러리를 잘못 이해하고 있어서 생기는 문제 이고,

import androidx.compose.material.icons.Icons

를 참조 하면 해결할 수 있는 문제야. 관련해서 다른 부분에도 관련 문제가 없는지 확인해 보고. 현재 내가 해둔 version catalog 를 참조해서 관련 부분도 정리해줘

:mockserver 의 의존성이 여전히 해결되지 않고 있어.
 @AssetFileProvider.kt  의 의존성을 해결해줘
:data 모듈에  @SectionApi.kt 의 의존성 이슈를 해결해줘.

----

네트워크 관련 작업도중 멀티 모듈의 의존성 그래프가 꼬여있는 걸로 확인이 되고 있어.
그와 함께 hilt 의 모듈 정의 파일들도 서로의 위치를 정확하게 지키지 못하고 있어.

참고로,  @NetworkModule.kt  파일에서 sectionApi 의 정의는 data 모듈에 선언 되어 있어야 하는 걸로 보이는데 다른 곳에 존재 하야 빌드에 실패를 하고 있어.
관련해서 생성된 파일들이 아래 권장 사항이 쓰여 있는 링크 내용에 맞도록 수정해줘

https://developer.android.com/topic/architecture/recommendations.md.txt

----

지금 공통적으로 유사한 문제들이 발생중인데, Gson 에 대한 의존성 문제들이 발생하고 있어.

여기서 우린 한가지 문제를 해결하고 넘어간다.

Gson 의 사용을 버리고 Kotlin 의 kotlinx.serialization 의 json 을 활용하는 것으로 전면 교체 작업을 시작하자.

그리고 여기 Retfofit 에서 추천 하는 사용 설명서가 있어 참고해서 마이그레이션이 필요한 부분들을 수정해줘
https://raw.githubusercontent.com/square/retrofit/refs/heads/trunk/retrofit-converters/kotlinx-serialization/README.md

----

 @libs.versions.toml  을 구성을 좀 더 가독성이 좋도록 각 섹션들 마다 유사 그룹 또는 사용처에 맞도록 순서를 재정렬 해주고, 네이밍도 깔끔하게 정리를 해줘

----

중요한 포인트를 하나 놓쳤다.

우린 네트워크 사용이나 UI 갱신등의 비동기 처리를 위해 Coroutine 을 사용해야 하는데 그 처리를 빠졌어.
관련 해서 대체 할 수 있는 영역들에 대해 추가 작업을 진행 하자

----

이번 할일 들은 네트워크 레이어와 데이터 레이어들이 완성되었으니 해당 레이어들의 신뢰성을 확보 할 수 있도록 테스트 환경을 만들꺼야.
지금까지 한 작업 내역들을 기반으로 주요한 기능들 위주로 테스트 코드를 작성해줘.

아래는 내가 생각했을때 필요한 구간이야. 추가로 필요한 것들도 추천 해줘.

1. 기존에 생성 되어있는 mockserver 의 테스트 코드들을 살려 작업을 진행해주고.
2. usecase 별 테스트 케이스가 필요하고.
3. 추가된 retrofit api 들의 테스트 코드들도 필요해

이제 이 작업들을 어떻게 수행할 것인지 전략을 우선 짜서 나와 검증해보고, 하나 하나 실행해보자

-> 좋아. 테스트 도구 및 환경 설정 부터 진행시켜
-> :mockserver 에 있는 기존 테스트 코드들을 우선적으로 시작하자 바닥부터 안정성을 확보해 나가자
->  @SectionApiTest.kt  빌드가 되지 않는데, 디펜던시 문제가 있는거 같아
-> 아직 문제가 해결되지 않았어.
     @SectionApiTest.kt  를 이렇게 테스트 setUp 의 방식을 좀 변경해서. hilt 를 활용하도록 변경하자. 그 방식이 실제 환경과 더 유사한 테스트 환경을 만들 수 있을거 같아
-> :mockserver 모듈에  @MockServerTest.kt  가 이미 존재하는데, 중복 테스트 파일들이 존재 하네.

   나는 androidTest 폴더에 존재하는 저 방식을 따르고 싶고, "file_read_test.json" 파일을 활용 하기를 원해.
    @TestAssetFileProvider.kt  를 이용해 셋업 해줄 수 있는 점도 참고 해줘.

   이제 :mockserver 의 테스트 들을 정리해줘 불필요한 부분들은 삭제 하면돼
----

